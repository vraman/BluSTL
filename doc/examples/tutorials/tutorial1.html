<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of tutorial1</title>
  <meta name="keywords" content="tutorial1">
  <meta name="description" content="% Defining the plant dynamics">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html v1.5 &copy; 2003-2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../m2html.css">
</head>
<body>
<a name="_top"></a>
<div><a href="../../index.html">Home</a> &gt;  <a href="#">examples</a> &gt; <a href="index.html">tutorials</a> &gt; tutorial1.m</div>

<!--<table width="100%"><tr><td align="left"><a href="../../index.html"><img alt="<" border="0" src="../../left.png">&nbsp;Master index</a></td>
<td align="right"><a href="index.html">Index for examples/tutorials&nbsp;<img alt=">" border="0" src="../../right.png"></a></td></tr></table>-->

<h1>tutorial1
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="box"><strong>% Defining the plant dynamics</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="box"><strong>This is a script file. </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="fragment"><pre class="comment">% Defining the plant dynamics 
 The toolbox is organized around one main class, called STLClti. An
 STLClti object is primarily a continuous Linear Time Invariant (LTI) 
 system with inputs, outputs and disturbances. Hence, a constructors for this 
 class takes matrices to define such an LTI. We first define and A and B
 matrices for state evolution:</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../../matlabicon.gif)">
<li><a href="../../src/STLC_lti.html" class="code" title="">STLC_lti</a>	</li></ul>
This function is called by:
<ul style="list-style-image:url(../../matlabicon.gif)">
</ul>
<!-- crossreference -->



<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="fragment"><pre>0001 <span class="comment">%% Defining the plant dynamics</span>
0002 <span class="comment">% The toolbox is organized around one main class, called STLClti. An</span>
0003 <span class="comment">% STLClti object is primarily a continuous Linear Time Invariant (LTI)</span>
0004 <span class="comment">% system with inputs, outputs and disturbances. Hence, a constructors for this</span>
0005 <span class="comment">% class takes matrices to define such an LTI. We first define and A and B</span>
0006 <span class="comment">% matrices for state evolution:</span>
0007 A = [0 1 ;
0008      0 0];
0009 Bu = [0;1];
0010 
0011 <span class="comment">%%</span>
0012 <span class="comment">% Later on, we will use a disturbance signals so we need to define a Bw</span>
0013 <span class="comment">% matrice. This signal will not influence the state dynamics, though, so we</span>
0014 <span class="comment">% set Bw to be 0.</span>
0015 Bw = [0;0]; 
0016 
0017 <span class="comment">%%</span>
0018 <span class="comment">% Next we define the output dynamics, i.e., C, Du and Dw matrices. Here we</span>
0019 <span class="comment">% have a single output $y(t) = x1(t)+w(t)$.</span>
0020 C = [1 0];
0021 Du = 0;
0022 Dw = 0;
0023 
0024 <span class="comment">%%</span>
0025 <span class="comment">% Now we can call the main constructor of STLC_lti class.</span>
0026 Sys= <a href="../../src/STLC_lti.html" class="code" title="">STLC_lti</a>(A,Bu,Bw,C,Du,Dw); 
0027 
0028 <span class="comment">%%</span>
0029 <span class="comment">% In the next section, we will define the different settings for the</span>
0030 <span class="comment">% control synthesis experiment. Before that, we define some initial state:</span>
0031 Sys.x0= [1 ; 1];
0032 
0033 <span class="comment">%% Defining the controller</span>
0034 <span class="comment">% We start by defining the time instants for the whole experiment, the discrete time</span>
0035 <span class="comment">% step ts for the controller and the horizon L in number of time steps.</span>
0036 Sys.time = 0:.1:10; 
0037 Sys.ts=.2; <span class="comment">% sampling time for controller</span>
0038 Sys.L=10;  <span class="comment">% horizon is 2s in that case</span>
0039 
0040 <span class="comment">%%</span>
0041 <span class="comment">% Next we declare some constraints on control inputs, here, lower and upper</span>
0042 <span class="comment">% bounds:</span>
0043 Sys.u_ub = 10;  <span class="comment">% upper bound on u</span>
0044 Sys.u_lb = -10; <span class="comment">% lower bound on u</span>
0045 
0046 <span class="comment">%%</span>
0047 <span class="comment">% Then the following define a signal temporal logic formula to be satisfied</span>
0048 <span class="comment">% by the system. Note that times in the temporal operators are continuous,</span>
0049 <span class="comment">% not discrete steps.</span>
0050 Sys.stl_list = {<span class="string">'ev_[0,1.] alw_[0,0.5] ( abs(y1(t)-w1(t)) &lt; 0.1)'</span>};
0051 
0052 <span class="comment">%%</span>
0053 <span class="comment">% Now we are ready to compile the controller for our problem.</span>
0054 controller = get_controller(Sys)
0055 
0056 <span class="comment">%%</span>
0057 <span class="comment">% Note that by default, the objective function will minimize the 1-norm of</span>
0058 <span class="comment">% the input.</span>
0059 
0060 <span class="comment">%% Testing the controller</span>
0061 <span class="comment">%  The simplest mode to run our system with the newly created controller is in</span>
0062 <span class="comment">%  open loop. This is done with the following command:</span>
0063 run_open_loop(Sys, controller);
0064 
0065 <span class="comment">%%</span>
0066 <span class="comment">% We can run our system in closed loop, but this is not very interesting,</span>
0067 <span class="comment">% because w is 0 anyway. Let's change that</span>
0068 Sys.Wref = Sys.time*0.;
0069 Sys.Wref(30:40) = 1; 
0070 Sys.Wref(60:80) = -0.5; 
0071 
0072 <span class="comment">%%</span>
0073 <span class="comment">% and the specs:</span>
0074 Sys.stl_list = {<span class="string">'alw (ev_[0,1.] alw_[0,0.5] ( abs(y1(t)-w1(t)) &lt; 0.1))'</span>};
0075 controller = get_controller(Sys);
0076 
0077 <span class="comment">%%</span>
0078 <span class="comment">% This time we will only plot input and outputs, i.e., disable the state</span>
0079 <span class="comment">% plotting:</span>
0080 Sys.plot_x =[]; <span class="comment">% default was Sys.plot_x = [1 2]</span>
0081 run_deterministic(Sys, controller);
0082 
0083 <span class="comment">%%</span>
0084 <span class="comment">% More examples are given in the folder BluSTL/examples. In particular the</span>
0085 <span class="comment">% hvac_room case study demonstrate the adversarial scenario, as well as</span>
0086 <span class="comment">% plot customization. The idea is to create a class derived from STLC_lti</span>
0087 <span class="comment">% and specialize the update_plot method.</span>
0088</pre></div>
<hr><address>Generated on Thu 09-Apr-2015 23:08:26 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" title="Matlab Documentation in HTML">m2html</a></strong> &copy; 2005</address>
</body>
</html>